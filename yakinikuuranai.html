<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>焼肉10タイプ性格診断</title>
    <style>
        /* 全体のベース設定 */
        body { 
            font-family: sans-serif; 
            padding: 15px; 
            line-height: 1.6; 
            background-color: #fffaf0; 
            color: #333;
            margin: 0;
            font-size: 18px; 
        }

        h1 { 
            color: #c0392b; 
            font-size: 1.5rem; 
            text-align: center;
            margin-bottom: 20px;
        }

        /* 質問エリア */
        .question-box { 
            margin-top: 20px; 
            padding: 20px; 
            border: 2px solid #ddd; 
            border-radius: 12px;
            background-color: #fff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        /* 質問文のテキスト */
        #question-text {
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* ボタンを「押しやすく」 */
        button { 
            display: block;
            width: 100%; 
            padding: 15px; 
            font-size: 16px; /* スマホでボタンがはみ出ないサイズ */
            margin-top: 10px; 
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background-color: #c0392b;
            color: white;
            font-weight: bold;
            transition: background 0.3s;
        }

        button:active {
            background-color: #a02d22;
        }

        /* 結果エリア */
        #result { 
            margin-top: 30px; 
            padding: 20px; 
            border: 3px solid #c0392b; 
            border-radius: 15px;
            background-color: #fff;
            display: none; /* JSでblockに切り替えます */
        }

        #progress { 
            font-weight: bold; 
            margin-top: 15px; 
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        h2 { color: #c0392b; font-size: 1.3rem; text-align: center; }
        h3 { border-bottom: 2px solid #f1c40f; padding-bottom: 5px; font-size: 1.1rem; }
        ul { padding-left: 20px; }
    </style>
</head>
<body>

<h1>🔥🍖 コンカフェ嬢<br>焼肉診断 🔥🍖</h1>
<div id="progress">残り 10 問</div>

<div id="question-area">
    </div>

<div id="result">
    </div>

<script>
// --- [データ部分は元のままなので中略しますが、コード内には保持してください] ---
const questions = [
  { q: "Q1. 初回のお客さんが来たときのあなたは？", a: ["明るく盛り上げる","落ち着いたトーンで丁寧に案内する","相手の様子を見ながら距離感を調整する","ちょっと緊張しつつも頑張って話す"] },
  { q: "Q2. 常連さんとの距離感は？", a: ["ノリよく仲良くなる","自然体でゆっくり距離を縮める","相手のペースに合わせて柔軟に対応","深い話をしがち"] },
  { q: "Q3. 仕事で褒められるポイントは？", a: ["明るさ・場の空気作り","安定感・安心感","丁寧さ・気遣い","こだわりや専門性"] },
  { q: "Q4. 逆に注意されがちなポイントは？", a: ["勢いで動きすぎる","繊細すぎて疲れやすい","頑固で譲れない部分がある","個性が強すぎて浮くことがある"] },
  { q: "Q5. お客さんが落ち込んでいたらどうする？", a: ["全力で元気づける","静かに寄り添って話を聞く","ふわっと癒しモードに入る","論理的に状況整理を手伝う"] },
  { q: "Q6. イベントやチェキ会でのあなたのスタイルは？", a: ["テンション高めで盛り上げる","丁寧に一人ひとりと向き合う","独自の世界観で魅せる","自然体で柔らかい雰囲気"] },
  { q: "Q7. あなたの営業スタイルに一番近いのは？", a: ["勢いとノリで引っ張る","コツコツ積み上げる堅実型","相手の気持ちを読む柔軟型","深い関係を築くタイプ"] },
  { q: "Q8. 店内でのあなたの立ち位置は？", a: ["ムードメーカー","まとめ役・相談役","裏方で支える縁の下の力持ち","マイペース枠"] },
  { q: "Q9. あなたの推しへの接し方は？", a: ["全力で愛を伝える","静かに見守る","距離感を大事にする","独特なアプローチをする"] },
  { q: "Q10. 直感で選んでください", a: ["ふわふわ（癒し）","カリッ（職人）","とろっ（王道）","コリッ（クセ強）"] }
];

const types = ["カルビ","タン","ロース","ハラミ","マルチョウ","ミノ","レバー","シマチョウ","アカセン","センマイ"];

const typeDescriptions = {
  "カルビ": { feature: ["外向性が高く、コミュニケーションの主導権を握りやすい", "感情表現が豊かで、周囲にポジティブな影響を与える", "初対面でも距離を縮めるのが得意"], weak: ["明るさを維持しようとして疲れやすい", "無意識に“盛り上げ役”を背負いがち", "本音を後回しにしがち"] },
  "タン": { feature: ["誠実で、約束やルールを大切にする", "感情の波が少なく安定している", "聞き役としての能力が高い"], weak: ["自分の気持ちを抑え込みやすい", "変化の多い環境が苦手", "感情表現が控えめで誤解されやすい"] },
  "ロース": { feature: ["柔軟で、どんなタイプの人とも合わせられる", "感情と論理のバランスが良い", "対人距離の調整が上手い"], weak: ["器用すぎて本音が見えにくい", "周囲の期待に合わせすぎて疲れる", "優先順位が曖昧になりがち"] },
  "ハラミ": { feature: ["継続力が高く、途中で投げ出さない", "裏方としてのサポート能力が高い", "誠実で信頼されやすい"], weak: ["自分を過小評価しがち", "頼まれごとを断れず負担を抱えやすい", "変化への対応が遅れがち"] },
  "マルチョウ": { feature: ["共感性が高く、相手の気持ちを察するのが得意", "柔らかい雰囲気で場を和ませる", "心理的安全性を作り出す"], weak: ["自分の感情を後回しにしがち", "優しさが利用されることがある", "決断に時間がかかる"] },
  "ミノ": { feature: ["集中力が高く、質の高い成果を出す", "自分の価値観を大切にする", "物事を深く理解しようとする"], weak: ["柔軟性が求められる場面が苦手", "頑固に見られることがある", "感情表現が控えめ"] },
  "レバー": { feature: ["他者の感情に寄り添う能力が高い", "内省的で、自分の心の動きを理解している", "微細な変化に気づく"], weak: ["情緒的な刺激に影響されやすい", "自分の感情を抱え込みがち", "ストレス耐性が低め"] },
  "シマチョウ": { feature: ["行動が早い、迷いが少ない", "場を盛り上げる能力が高い", "直感的な判断が得意"], weak: ["衝動的になりやすい", "計画性が弱い", "感情の起伏が激しいことがある"] },
  "アカセン": { feature: ["発想が独特で、創造性が高い", "自分の価値観を大切にする", "表現力が豊か"], weak: ["誤解されやすい", "気分の波がある", "集団行動が苦手なことも"] },
  "センマイ": { feature: ["論理的で、物事を構造化して理解する", "感情に流されず安定した判断ができる", "長期的視点で考えられる"], weak: ["感情的な相手とのコミュニケーションが負担", "柔軟性に欠けることがある", "自分のペースを乱されるのが苦手"] }
};

const scores = {
    "0-0":[2,0,1,0,1,1,-1,2,1,-1], "0-1":[0,2,1,1,0,1,1,-1,-1,2], "0-2":[0,1,2,1,1,1,1,0,0,1], "0-3":[-1,1,0,1,1,1,3,-1,1,2],
    "1-0":[2,0,0,1,0,1,-1,3,1,-2], "1-1":[0,2,1,2,1,1,1,0,-1,1], "1-2":[2,1,2,1,1,1,1,-1,-1,1], "1-3":[-1,1,1,0,1,1,2,0,1,3],
    "2-0":[3,0,1,1,1,1,-1,2,1,-2], "2-1":[0,2,2,1,1,1,1,0,0,1], "2-2":[1,1,1,1,1,1,2,-2,-1,1], "2-3":[-2,1,1,1,1,2,1,0,1,2],
    "3-0":[2,1,1,0,0,1,-1,3,1,-2], "3-1":[-1,1,1,1,1,1,3,0,1,2], "3-2":[-1,1,1,1,1,2,1,0,1,2], "3-3":[1,1,1,1,0,1,0,2,2,-2],
    "4-0":[3,0,1,1,1,1,-1,2,1,-2], "4-1":[0,2,1,1,1,1,1,0,0,1], "4-2":[2,1,1,1,2,1,1,0,0,1], "4-3":[-1,1,1,1,1,1,1,0,1,2],
    "5-0":[2,1,1,1,1,1,-1,3,1,-2], "5-1":[0,2,1,2,1,1,1,0,0,1], "5-2":[1,0,1,1,1,2,0,0,3,0], "5-3":[1,1,1,1,2,1,1,0,0,1],
    "6-0":[2,1,1,1,0,1,-1,3,1,-2], "6-1":[0,2,1,3,1,1,1,0,0,1], "6-2":[1,1,2,1,1,1,1,0,0,1], "6-3":[-1,1,1,1,1,1,3,0,1,2],
    "7-0":[3,1,1,1,1,1,-1,2,1,-2], "7-1":[0,2,3,1,1,1,1,0,0,1], "7-2":[1,1,1,3,1,1,1,0,0,1], "7-3":[-1,1,1,0,1,2,1,0,2,1],
    "8-0":[3,0,1,1,1,1,-1,2,1,-2], "8-1":[0,2,1,2,1,1,1,0,0,2], "8-2":[1,1,1,1,1,1,2,0,0,3], "8-3":[1,1,1,1,1,2,1,0,3,1],
    "9-0":[1,1,1,1,2,1,1,0,0,1], "9-1":[-1,1,1,1,1,2,1,0,1,2], "9-2":[3,1,1,1,1,1,1,1,1,-1], "9-3":[1,1,1,1,1,1,1,0,3,1]
};

// =============================
// ロジック
// =============================
let current = 0;
let totalScore = Array(10).fill(0);

function showQuestion() {
    const q = questions[current];
    document.getElementById("progress").innerHTML = `残り ${10 - current} 問`;

    let html = `<div class="question-box"><p id="question-text">${q.q}</p>`;
    q.a.forEach((text, ai) => {
        html += `<button onclick="answer(${ai})">${text}</button>`;
    });
    html += "</div>";

    document.getElementById("question-area").innerHTML = html;
}

function answer(ai) {
    const key = `${current}-${ai}`;
    const arr = scores[key];
    for (let i = 0; i < 10; i++) { totalScore[i] += arr[i]; }
    current++;
    if (current >= 10) { finish(); } else { showQuestion(); }
}

function generateMixDescription(a, b, rank) {
    const A = typeDescriptions[a];
    const B = typeDescriptions[b];
    const rankText = { "並": "あなたは2タイプをバランスよく持つタイプ。", "上": "あなたは2つの強みを高いレベルで持つタイプ。", "特上": "あなたは長所を高度に統合したハイブリッド型。" }[rank];
    return `<p>${rankText}</p><h3>【特徴】</h3><ul><li>${A.feature[0]}</li><li>${B.feature[0]}</li><li>柔軟性が高い</li></ul><h3>【弱点】</h3><ul><li>本音が見えにくい</li><li>疲れやすい</li></ul>`;
}

function finish() {
    document.getElementById("question-area").style.display = "none";
    document.getElementById("progress").style.display = "none";
    
    // 【修正箇所】結果エリアを表示状態にする
    const resultDiv = document.getElementById("result");
    resultDiv.style.display = "block";

    const sorted = totalScore
        .map((v, i) => ({ type: types[i], score: v }))
        .sort((a, b) => b.score - a.score);

    const top = sorted[0];
    const second = sorted[1];

    let rank = "並";
    if (top.score >= 25) rank = "特上";
    else if (top.score >= 20) rank = "上";

    let html = "";
    if (top.score - second.score <= 3) {
        html += `<h2>${rank} ${top.type} × ${second.type} MIXタイプ！</h2>`;
        html += generateMixDescription(top.type, second.type, rank);
    } else {
        html += `<h2>${rank} ${top.type}タイプ！</h2>`;
        html += `<h3>【特徴】</h3><ul>${typeDescriptions[top.type].feature.map(f => `<li>${f}</li>`).join("")}</ul><h3>【弱点】</h3><ul>${typeDescriptions[top.type].weak.map(f => `<li>${f}</li>`).join("")}</ul>`;
    }
    resultDiv.innerHTML = html;
}

showQuestion();
</script>
</body>
</html>