<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ãŠã˜ã•ã‚“æ§‹æ–‡ã‚¨ãƒ‡ã‚£ã‚¿ Ultra</title>
    <style>
        :root {
            --ojisan-blue: #7494c0;
            --ojisan-header: #353b48;
            --ojisan-green: #4caf50;
            --ojisan-red: #e53935;
        }
        html, body { 
            margin: 0; padding: 0; height: 100%; overflow: hidden; 
            background-color: var(--ojisan-blue);
        }
        body { font-family: sans-serif; display: flex; justify-content: center; }
        .app-container { 
            width: 100%; max-width: 500px; height: 100vh; height: -webkit-fill-available;
            background: #fff; display: flex; flex-direction: column;
        }
        .header { 
            background: var(--ojisan-header); color: white; padding: 15px; 
            text-align: center; font-weight: bold; flex-shrink: 0;
        }
        .chat-area { 
            flex: 1; background: var(--ojisan-blue); padding: 10px; 
            overflow-y: auto; display: flex; flex-direction: column;
            -webkit-overflow-scrolling: touch;
        }
        .msg-container { margin-bottom: 20px; display: flex; flex-direction: column; align-self: flex-start; max-width: 90%; }
        .msg { 
            padding: 12px; border-radius: 18px; font-size: 0.95rem; line-height: 1.5; 
            background: white; border-bottom-left-radius: 2px; 
            word-break: break-all; white-space: pre-wrap; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .copy-btn { margin-top: 8px; background: rgba(255,255,255,0.3); border: 1px solid white; color: white; font-size: 0.75rem; cursor: pointer; padding: 6px 15px; border-radius: 20px; align-self: flex-start; }

        .input-area { 
            background: #f8f8f8; padding: 10px 15px; 
            padding-bottom: calc(10px + env(safe-area-inset-bottom)); 
            border-top: 1px solid #ccc; flex-shrink: 0;
        }
        .name-input { width: 100%; padding: 10px; margin-bottom: 5px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 1rem; }
        textarea { width: 100%; height: 60px; border: 1px solid #ccc; border-radius: 8px; padding: 10px; box-sizing: border-box; resize: none; font-size: 1rem; display: block; }
        
        /* ãƒœã‚¿ãƒ³ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒ†ãƒŠ */
        .btn-group { display: flex; gap: 10px; margin-top: 8px; }
        .main-btn { flex: 2; padding: 12px; background: var(--ojisan-green); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1.1rem; }
        .clear-btn { flex: 1; padding: 12px; background: var(--ojisan-red); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9rem; }
        
        #toast { visibility: hidden; min-width: 150px; background-color: rgba(0,0,0,0.8); color: #fff; text-align: center; border-radius: 50px; padding: 10px; position: fixed; z-index: 100; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; }
        #toast.show { visibility: visible; animation: fadein 0.3s; }
        @keyframes fadein { from {opacity: 0;} to {opacity: 1;} }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">ãŠã˜ã•ã‚“ï¼ˆ54ï¼‰</div>
    <div class="chat-area" id="chatArea">
        </div>
    <div class="input-area">
        <input type="text" id="targetName" class="name-input" placeholder="åå‰ï¼ˆä¾‹ï¼šèŠ±å­ï¼‰">
        <textarea id="userInput" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..."></textarea>
        <div class="btn-group">
            <button class="main-btn" onclick="transform()">ãŠã˜ã•ã‚“å¤‰æ›â€¼ï¸</button>
            <button class="clear-btn" onclick="clearChat()">ã‚¯ãƒªã‚¢ğŸ’¦</button>
        </div>
    </div>
</div>

<div id="toast">ã‚³ãƒ”ãƒ¼ã—ãŸãƒ¨ğŸ˜‹ğŸ’¦</div>
<script>
    const emojis = ["â—", "â€¼ï¸", "â“", "ğŸ’¦", "âœ¨", "ğŸ˜‹", "ğŸ’•", "ğŸ˜˜", "â˜€ï¸", "ğŸƒâ€â™‚ï¸ğŸ’¨", "ğŸ‘", "ğŸ†ğŸ’¦", "ğŸ‘…", "ğŸš€ğŸ’¦", "ğŸ‘", "ğŸ¥–ğŸ’¦", "ğŸ’‹", "ğŸ’–","ğŸ˜…","ğŸ¤£","ğŸ’–", "ğŸ¤«"];
    
		const slotA = [
		    "NAMEãƒãƒ£ãƒ³ã¯ä»Šã€ä½•ã—ã¦ã‚‹ã®ã‚«ãƒŠâ“ãŠã˜ã•ã‚“ã¯ä»Šã€ãŠé¢¨å‘‚ä¸ŠãŒã‚Šã§ã€è£¸ã€ãªã‚“ã¡ã‚ƒã£ã¦ğŸ’•",
		    "ã¡ãªã¿ã«ã€NAMEãƒãƒ£ãƒ³ã®ä»Šæ—¥ã®ãƒ‘ãƒ³ãƒ„ã€ä½•è‰²ã‚«ãƒŠâ“ãŠã˜ã•ã‚“ã€æ°—ã«ãªã£ã¡ã‚ƒã†ãƒŠã‚¡ï¼ˆç¬‘ï¼‰",
		    "NAMEãƒãƒ£ãƒ³ã®ãŸã‚ã«ã€ãŠã˜ã•ã‚“ã€ã‹ã£ã“ã„ã„è‡ªæ’®ã‚Šã€æ’®ã£ã¡ã‚ƒã£ãŸãƒ¨âœ¨ä»Šåº¦é€ã‚‹ãƒğŸ’•",
		    "ä»Šåº¦ã€å†…ç·’ã§ã€äºŒäººãã‚Šã®ã€ç‰¹åˆ¥æˆæ¥­ã€ã—ã¡ã‚ƒã†ã‚¾ğŸ˜‹NAMEãƒãƒ£ãƒ³ã€ã„ã„ã‚ˆãƒâ“",
		    "ãŠã˜ã•ã‚“ã®ã€ãŸãã¾ã—ã„è…•ã€è§¦ã£ã¦ã¿ãŸãã€ãªã„ã‚«ãƒŠâ“NAMEãƒãƒ£ãƒ³ãªã‚‰ç‰¹åˆ¥ã ãƒ¨ğŸ’–",
		    "NAMEãƒãƒ£ãƒ³ã®ã€ã„ã„åŒ‚ã„ãŒã€ã“ã£ã¡ã¾ã§ã€æ¼‚ã£ã¦ããã†ã ãƒ¨ã€ã‚¯ãƒ³ã‚¯ãƒ³(ï¿£(oo)ï¿£)ğŸ’•",
		    "ãŠã˜ã•ã‚“ã€ä»Šæ—¥ã¯ã€NAMEãƒãƒ£ãƒ³ã®äº‹ã°ã‹ã‚Šè€ƒãˆã¦ã€ä»•äº‹ãŒæ‰‹ã«ä»˜ã‹ãªã„ãƒ¨ğŸ’¦ï¼ˆæ±—ï¼‰",
		    "ã•ã£ãã€NAMEãƒãƒ£ãƒ³ã«ä¼¼ãŸäººã‚’è¦‹ã‹ã‘ã¦ã€ãƒ‰ã‚­ãƒ‰ã‚­ã—ã¡ã‚ƒã£ãŸãƒ¨âœ¨é‹å‘½ã€æ„Ÿã˜ã¡ã‚ƒã†ãƒğŸ˜˜",
		    "ãŠã˜ã•ã‚“ã®èƒ¸ã®ä¸­ã«ã€é£›ã³è¾¼ã‚“ã§ãã¦ã»ã—ã„ãƒŠã‚¡ã€ãƒŠãƒ³ãƒ†ãƒğŸ’•(^_âˆ’)âˆ’â˜†",
				"NAMEãƒãƒ£ãƒ³ã€ä»Šæ—¥ã¯ã€ãªã‚“ã ã‹ã€è‰¶ã£ã½ã„ãƒâœ¨ãŠã˜ã•ã‚“ã€ç›´æ„Ÿã§ã€ã‚ã‹ã£ã¡ã‚ƒã†ã‚“ã ãƒ¨ğŸ˜‹ğŸš€ğŸ‘ˆ",
				"ãµã¨é¡ã‚’è¦‹ãŸã‚‰ã€ãŠã˜ã•ã‚“ã®é¡”ãŒã€NAMEãƒãƒ£ãƒ³ã¸ã®æ„›ã§ã€æº€ã¡æº¢ã‚Œã¦ã¦ã€è‹¦ç¬‘ã„ã€ã ãƒ¨ï¼ˆç¬‘ï¼‰",
				"NAMEãƒãƒ£ãƒ³ã¯ã€ãŠã˜ã•ã‚“ã«ã¨ã£ã¦ã€ä¸€è¼ªã®ã€æ¯’èŠ±ã€ã ãƒğŸŒ¹ãƒˆã‚²ã”ã¨ã€æ„›ã—ã¦ã‚ã’ãŸã„ãƒŠã‚¡âœ¨",
				"ãŠã˜ã•ã‚“ã€ã•ã£ãã‹ã‚‰ã€NAMEãƒãƒ£ãƒ³ã®SNSã€3å‘¨ã‚‚ã€è¦‹è¿”ã—ã¡ã‚ƒã£ãŸãƒ¨ï¼ˆæ±—ï¼‰ã‚¹ãƒˆãƒ¼ã‚«ãƒ¼ã€ã‚«ãƒŠâ“ï¼ˆç¬‘ï¼‰",
				"NAMEãƒãƒ£ãƒ³ã€ç–²ã‚Œã¦ã‚‹ã®ã‚«ãƒŠâ“ãŠã˜ã•ã‚“ã«ã¯ã€ãã®ã€æ½¤ã‚“ã ç³ã€ã§ã€å…¨ã¦ä¼ã‚ã£ã¦ãã‚‹ãƒ¨ğŸ’•",
		    "NAMEãƒãƒ£ãƒ³ã®ã€æŸ”ã‚‰ã‹ãªè‚Œã‚’ã€æƒ³åƒã—ã¦ã€ãƒ‹ãƒ¤ãƒ‹ãƒ¤ã—ã¡ã‚ƒã†ãŠã˜ã•ã‚“ã‚’è¨±ã—ã¦ãƒğŸ˜‹"
		];

		const slotB = [
		    "ãã‚“ãªã“ã¨ã‚ˆã‚Šã€ä»Šå¤œã€ãƒ‘ãƒ‘ã¨ã€ç¾å‘³ã—ã„ãƒ¯ã‚¤ãƒ³ã€é£²ã¾ãªã„ã‹ã„â“NAMEãƒãƒ£ãƒ³ã®ç³ã«ä¹¾æ¯ã€ãƒ€ãƒâœ¨",
		    "é€±æœ«ã¯ã€ãŠã˜ã•ã‚“ã¨ã€ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ‡ãƒ¼ãƒˆã€æ±ºå®šã ãƒâ€¼ï¸NAMEãƒãƒ£ãƒ³ã®è¡ŒããŸã„ã¨ã“ã‚ã€ã©ã“ã§ã‚‚é€£ã‚Œã¦ã„ããƒ¨ğŸ’¨",
		    "ãŸã¾ã«ã¯ã€è´…æ²¢ã—ã¦ã€é«˜ç´šãƒ›ãƒ†ãƒ«ã§ã€ãƒ‡ã‚£ãƒŠãƒ¼ãªã‚“ã¦ã€ã©ã†ã‚«ãƒŠâ“ã‚‚ã¡ã‚ã‚“ã€NAMEãƒãƒ£ãƒ³ã¨äºŒäººãã‚Šã€ã ãƒ¨ğŸ’‹",
		    "NAMEãƒãƒ£ãƒ³ã«ã€ä¼¼åˆã„ãã†ãªã€å¯æ„›ã„ä¸‹ç€ã€è¦‹ã¤ã‘ã¡ã‚ƒã£ãŸãƒ¨ğŸ’•ä»Šåº¦ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã•ã›ã¦ãƒğŸ˜‹",
		    "ç§˜å¯†ã®ã€ãƒãƒƒã‚µãƒ¼ã‚¸ã€ã—ã¦ã‚ã’ãŸã„ãªã€ãƒŠãƒ³ãƒ†ãƒğŸ’¦NAMEãƒãƒ£ãƒ³ã®ä½“ã€ç™’ã—ã¦ã‚ã’ãŸã„ãƒ¨ğŸ’–",
		    "ãŠã˜ã•ã‚“ã€NAMEãƒãƒ£ãƒ³ã®ãŸã‚ã«ã€ç‰¹è£½ã®ã€æ‰‹æ–™ç†ã€æŒ¯ã‚‹èˆã£ã¡ã‚ƒãŠã†ã‹ãƒŠâ“ğŸ´ğŸ’•",
		    "äºŒäººã ã‘ã®ã€ç§˜å¯†ã®ã€ãƒ“ãƒ‡ã‚ªé€šè©±ã€ã—ã¡ã‚ƒã‚ãªã„ã‹ã„â“NAMEãƒãƒ£ãƒ³ã®é¡”ãŒè¦‹ãŸã„ãƒ¨ğŸ˜˜",
		    "NAMEãƒãƒ£ãƒ³ã®ã€è€³å…ƒã§ã€æ„›ã‚’å›ã„ã¦ã‚ã’ãŸã„ãƒŠã‚¡âœ¨ã‚¾ã‚¯ã‚¾ã‚¯ã€ã—ã¡ã‚ƒã†ã‚«ãƒŠâ“ï¼ˆç¬‘ï¼‰",
		    "ä»Šåº¦ã€æ¸©æ³‰æ—…è¡Œã«ã§ã‚‚ã€è¡Œã“ã†ãƒ¨â™¨ï¸ã‚‚ã¡ã‚ã‚“ã€æ··æµ´ã€ã ãƒ¨(^_âˆ’)âˆ’â˜†ğŸ’¦",
				"ä»Šåº¦ã€NAMEãƒãƒ£ãƒ³ã®ã€æ‚©ã¿ã€ãŠã˜ã•ã‚“ãŒå…¨éƒ¨ã€é£²ã¿è¾¼ã‚“ã§ã‚ã’ã‚‹ã‹ã‚‰ãƒğŸ’•å¤œã®ã€å€‹äººé¢è«‡ã€ã ãƒ¨ğŸ˜‹",
				"NAMEãƒãƒ£ãƒ³ã®ã€ã†ãªã˜ã€ã‚’è¦‹ã¦ãŸã‚‰ã€ãŠã˜ã•ã‚“ã®ã€æ‚ªã„ç™–ã€ãŒå‡ºã¡ã‚ƒã„ãã†ã ãƒ¨(^_âˆ’)âˆ’â˜†",
				"ãŠã˜ã•ã‚“ã®ã€ã‚·ãƒ«ã‚¯ã®ã‚ˆã†ãªã€ãƒã‚¹ãƒ­ãƒ¼ãƒ–ã€NAMEãƒãƒ£ãƒ³ã«ã€ç€ã›ã¦ã‚ã’ãŸã„ãƒŠã‚¡ã€ãƒŠãƒ³ãƒ†ãƒğŸ’•",
				"NAMEãƒãƒ£ãƒ³ã€ãŸã¾ã«ã¯ã€ãŠã˜ã•ã‚“ã®å‰ã§ã€ç´ ç›´ãªã€å­çŒ«ã€ã«ãªã£ã¦ã‚‚ã€ã„ã„ã‚“ã ãƒ¨â“ï¼ˆæ±—ï¼‰ğŸ’‹",
				"ãŠã˜ã•ã‚“ã€NAMEãƒãƒ£ãƒ³ã®ã€è€³ãŸã¶ã€ã®å½¢ã ã‘ã§ã€ä¸€æ™©ä¸­ã€èªã‚Šåˆãˆã‚‹ã€è‡ªä¿¡ãŒã‚ã‚‹ãƒ¨âœ¨",
		    "ãŠã˜ã•ã‚“ã€NAMEãƒãƒ£ãƒ³ã®ã€å°‚å±ã®ã€ãƒ‘ãƒ‘ã«ã€ãªã‚ŠãŸã„ãƒŠã‚¡ğŸ’•ãªã‚“ã§ã‚‚è²·ã£ã¦ã‚ã’ã‚‹ãƒ¨ğŸ˜‹"
		];

		const slotC = [
		    "è¿”ä¿¡ã€å¾…ã£ã¦ã‚‹ãƒ¨ã€åƒ•ã®å¯æ„›ã„NAMEãƒãƒ£ãƒ³ğŸ’‹",
		    "ãŠã˜ã•ã‚“ã€ã‚‚ã†ã€NAMEãƒãƒ£ãƒ³ã®ã“ã¨è€ƒãˆãŸã‚‰ã€æˆ‘æ…¢ã€ã§ããªã„ãƒ¨ï¼ˆç¬‘ï¼‰",
		    "æ¬¡ã¯ã€ã‚‚ã£ã¨ã€ã™ã”ã„ã“ã¨ã€ã—ã¡ã‚ƒãŠã†ãƒâ€¼ï¸NAMEãƒãƒ£ãƒ³ã€è¦šæ‚Ÿã—ã¦ãƒ(^_âˆ’)âˆ’â˜†",
		    "ã“ã‚Œã€äºŒäººã ã‘ã®ã€ç§˜å¯†ã€ã ãƒ¨(^_âˆ’)âˆ’â˜†NAMEãƒãƒ£ãƒ³ã‚’ä¿¡ã˜ã¦ã‚‹ãƒ¨ğŸ’•",
		    "ãŠã‚„ã™ã¿ã€ãƒãƒ¥ãƒƒğŸ’•NAMEãƒãƒ£ãƒ³ã®å¤¢ã‚’ã€è¦‹ã¡ã‚ƒã†ã‚¾ğŸ˜‹ğŸ’¦",
		    "è¿”ä¿¡ãŒãªã„ã¨ã€ãŠã˜ã•ã‚“ã€æ³£ã„ã¡ã‚ƒã†ã‚¾ğŸ’¦ã€‚ãƒ»ã‚œãƒ»(ãƒĞ”`)ãƒ»ã‚œãƒ»ã€‚",
		    "NAMEãƒãƒ£ãƒ³ã®ã€å…¨ã¦ã‚’ã€ãŠã˜ã•ã‚“ã«ã€é ã‘ã¦ã»ã—ã„ãƒŠã‚¡ğŸ’–",
		    "ä»Šå¤œã¯ã€å¯ã‹ã•ãªã„ã‚¾ğŸ’•è¦šæ‚Ÿã—ã¦ãƒ(^_âˆ’)âˆ’â˜†ãƒŠãƒ³ãƒãƒ£ãƒƒãƒ†âœ¨",
		    "ã‚ã€ãŠã˜ã•ã‚“ã®äº‹ã€å«Œã„ã«ãªã‚‰ãªã„ã§ãƒğŸ’¦ãšã£ã¨ã€æ„›ã—ã¦ã‚‹ãƒ¨ğŸ’•",
				"ãŠã˜ã•ã‚“ã®ã€æ„›ã®ç‰¢ç„ã€ã‹ã‚‰ã¯ã€ã‚‚ã†ã€æŠœã‘å‡ºã›ãªã„ã‚¾ğŸ’•è¦šæ‚Ÿã—ã¦ã€ãŠã‚„ã™ã¿ã€ãŠå§«æ§˜ğŸ’‹",
				"NAMEãƒãƒ£ãƒ³ã€è¿”ä¿¡ãŒé…ã„ã¨ã€ãŠã˜ã•ã‚“ã®ã€ãƒãƒ¼ãƒˆã€ãŒã€å¹²ã‹ã‚‰ã³ã¦ã€æ­»ã‚“ã˜ã‚ƒã†ãƒ¨ï¼ˆæ±—ï¼‰ğŸ’¦",
				"æ˜æ—¥ã‚‚ã€æ˜å¾Œæ—¥ã‚‚ã€100å¹´å¾Œã‚‚ã€ãŠã˜ã•ã‚“ã¯ã€NAMEãƒãƒ£ãƒ³ã‚’ã€è¦‹å®ˆã£ã¦ã‚‹ã‹ã‚‰ãƒğŸ’–",
				"ãŠã˜ã•ã‚“ã®ã€ã“ã®ã€ç†±ã„é¼“å‹•ã€NAMEãƒãƒ£ãƒ³ã®ã€ã‚¹ãƒãƒ›ã¾ã§ã€éŸ¿ã„ã¦ã‚‹ã‚«ãƒŠâ“ãƒ‰ã‚¯ãƒ‰ã‚¯ã€ã ãƒ¨ğŸ†ğŸ’¦",
				"ã˜ã‚ƒã‚ã€æ¬¡ã¯ã€å¤¢ã®ä¸­ã§ã€é€¢å¼•ã€ã—ã¡ã‚ƒã†ã‚¾ğŸ¨ğŸ’•NAMEãƒãƒ£ãƒ³ã€æ„›ã—ã¦ã‚‹ãƒ¨(^_âˆ’)âˆ’â˜†",
		    "ã˜ã‚ƒã‚ã€ã¾ãŸå¾Œã§ã€ãƒ¡ãƒ¼ãƒ«ã—ã¡ã‚ƒã†ãƒâ€¼ï¸ãƒã‚¤ãƒã‚¤ã€ãŠå§«æ§˜ğŸ’‹"
		];

		// æœ€åˆã«æŒ¨æ‹¶ã‚’è¡¨ç¤º
    window.onload = () => { clearChat(); };

    function clearChat() {
        const chatArea = document.getElementById('chatArea');
        chatArea.innerHTML = ''; // å±¥æ­´ã‚’å…¨å‰Šé™¤
        const name = document.getElementById('targetName').value || "ã€‡ã€‡";
        addMessage(`ãƒ¤ãƒƒãƒ›ãƒ¼â€¼ï¸${name}ãƒãƒ£ãƒ³âœ¨ã¾ãšã¯åå‰ã‚’æ•™ãˆã¦ã‹ã‚‰ã€æ–‡ç« ã‚’å…¥åŠ›ã—ã¦ãƒğŸ’•ãŠã˜ã•ã‚“ã€å¾…ã£ã¦ã‚‹ãƒ¨ğŸ˜‹`);
    }

    function getEmoji() {
        return emojis[Math.floor(Math.random() * emojis.length)];
    }

    function transform() {
        const input = document.getElementById('userInput').value;
        const name = document.getElementById('targetName').value || "ã€‡ã€‡";
        if (!input) return;

        let segments = input.split(/([ã€ã€‚ãŒã¯ã‚’ã‚‚ï¼!ï¼Ÿ?])/);
        let ojisanResult = "";
        
        const calls = [`${name}ãƒãƒ£ãƒ³ã€ã‚ªãƒãƒ¨ã‚¦ã€œâ˜€ï¸ `, `ãƒ¤ãƒƒãƒ›ãƒ¼â€¼ï¸${name}ãƒãƒ£ãƒ³âœ¨ `, `ã­ã‡ã­ã‡${name}ãƒãƒ£ãƒ³ã€ä»Šã€ä½•ã—ã¦ã‚‹ã®â“ `, `ãŠç–²ã‚Œæ§˜ã€œâœ¨${name}ãƒãƒ£ãƒ³ã€é ‘å¼µã£ã¦ã‚‹ãƒğŸ’• `];
        ojisanResult += calls[Math.floor(Math.random() * calls.length)];

        segments.forEach((seg) => {
            if (!seg || seg === "") return;
            let processed = seg
                .replace(/[ã€‚]/g, "â€¼ï¸" + getEmoji() + getEmoji())
                .replace(/[ã€]/g, "ã€" + getEmoji())
                .replace(/ã§ã™/g, "ã ãƒ¨" + getEmoji())
                .replace(/ã¾ã™/g, "ã‚‹ãƒ" + getEmoji())
                .replace(/ãªã„/g, "ãƒŠã‚£ğŸ’¦")
                .replace(/ã‹ãª/g, "ã‚«ãƒŠâ“");

            if (Math.random() > 0.4 && !processed.match(/[ã€â€¼ï¸â“]/)) {
                processed += "ã€" + getEmoji();
            }
            ojisanResult += processed;
        });

        // ã‚¹ãƒ­ãƒƒãƒˆã‚’è¿½åŠ ã—ã¤ã¤ã€åå‰ã‚’ç½®æ›
        ojisanResult += "â€¼ï¸" + getEmoji();
        let sA = slotA[Math.floor(Math.random() * slotA.length)].replace(/NAME/g, name);
        let sB = slotB[Math.floor(Math.random() * slotB.length)].replace(/NAME/g, name);
        let sC = slotC[Math.floor(Math.random() * slotC.length)].replace(/NAME/g, name);

        ojisanResult += sA + "ã€" + getEmoji() + sB + "ã€" + getEmoji() + sC;

        addMessage(ojisanResult);
        document.getElementById('userInput').value = "";

				// å¤‰æ›å¾Œã«ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’éš ã™ï¼ˆä»»æ„ï¼‰
//        document.activeElement.blur();
    }

		function addMessage(text) {
        const chatArea = document.getElementById('chatArea');
        const container = document.createElement('div');
        container.className = 'msg-container';
        const msgDiv = document.createElement('div');
        msgDiv.className = 'msg';
        msgDiv.innerText = text;
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.innerText = 'ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒ¨ğŸ“‹';
        copyBtn.onclick = function() {
            navigator.clipboard.writeText(text).then(() => showToast());
        };
        container.appendChild(msgDiv);
        container.appendChild(copyBtn);
        chatArea.appendChild(container);
        
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ æ™‚ã«ä¸€ç•ªä¸‹ã¸è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        setTimeout(() => {
            chatArea.scrollTo({ top: chatArea.scrollHeight, behavior: 'smooth' });
        }, 100);
    }

    function showToast() {
        const toast = document.getElementById("toast");
        toast.className = "show";
        setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 2000);
    }
</script>

</body>
</html>