<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç—›ãƒã‚¨ãƒ ãƒã‚§ã‚­ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;500&family=Yomogi&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
				body {
            background-color: #fce4ec;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Kiwi Maru', serif;
            touch-action: manipulation;
        }

        #cheki-area {
            background: white;
            width: 300px;
            height: 450px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            padding: 15px 15px 60px 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .photo-area {
            background: #333;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        #uploaded-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        #placeholder-text {
            color: #fff;
            font-size: 0.8rem;
        }

        /* ãƒ•ãƒ¬ãƒ¼ã‚ºè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼šå¹…ã‚’åºƒã’ã¦æ”¹è¡Œã‚’æŠ‘åˆ¶ */
        #phrase-display {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%; /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«åˆã‚ã›ã‚‹ */
            min-width: 80%; /* æœ€ä½é™ã®å¹…ã‚’ç¢ºä¿ */
            max-width: 98%; /* ãƒã‚§ã‚­ã®ç«¯ã‚®ãƒªã‚®ãƒªã¾ã§åºƒã’ã‚‹ */
            padding: 8px 0;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            font-family: 'Yomogi', cursive;
            font-size: 1.15rem; /* ã‚ãšã‹ã«å°ã•ãã—ã¦1è¡Œã®åå®¹åŠ›ã‚’ã‚¢ãƒƒãƒ— */
            line-height: 1.35;
            text-align: center;
            word-break: normal; /* å˜èªã®é€”ä¸­ã§å¤‰ã«åˆ‡ã‚Œãªã„ã‚ˆã†ã« */
            overflow-wrap: anywhere;
            pointer-events: none;
            z-index: 10;
            box-sizing: border-box;
        }

        .controls {
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 260px;
        }

        button, .upload-label {
            padding: 12px;
            font-size: 0.9rem;
            cursor: pointer;
            background-color: #ff80ab;
            color: white;
            border: none;
            border-radius: 25px;
            box-shadow: 0 4px 0 #c94b7c;
            transition: 0.1s;
            text-align: center;
            font-weight: bold;
            display: block;
            width: 100%;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        button:active, .upload-label:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #c94b7c;
        }

        .download-btn {
            background-color: #4fc3f7;
            box-shadow: 0 4px 0 #0288d1;
        }

        #imageInput { display: none; }    </style>
</head>
<body>

		<div id="cheki-area">
        <div class="photo-area">
            <span id="placeholder-text">è‡ªæ’®ã‚Šã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã­</span>
            <img id="uploaded-img" src="" alt="">
            <div id="phrase-display"></div>
        </div>
    </div>

    <div class="controls">
        <label class="upload-label">
            è‡ªæ’®ã‚Šã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
            <input type="file" id="imageInput" accept="image/*">
        </label>
        <button onclick="generatePoem()">ãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆ</button>
        <button class="download-btn" onclick="downloadCheki()">ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
    </div>

    <script>
        const dictionary = {
            intro: [
								"ã­ã‡ã€",
								"åˆå‰2æ™‚ã®",
								"ä¸–ç•Œã§ä¸€ç•ª",
								"æ•‘ã„ã‚ˆã†ã®ãªã„",
								"å›ã¨ã„ã†åã®",
								"è¦–ç·šãŒåˆã†ãŸã³",
								"é€æ˜ãªç§ã®",
								"çœ ã‚Œãªã„å¤œ",
								"å¥½ãã¨å«Œã„ã®",
								"è™šç„¡ã®ä¸–ç•Œ",
								"ä½•ã‚‚ã‹ã‚‚ãŒè™šåƒ",
								"è™ã’ã‚‰ã‚ŒãŸ",
								"ãˆã€ã¾ã£ã¦",
								"è‰ã®ä¸Šã§",
								"ãã¿ã®æ¾„ã‚“ã ç³",
								"æ˜ã‹ã‚Šã®ãªã„ä¸–ç•Œ",
								"æ±‚ã‚ã‚‰ã‚Œã¦ã„ãªã„",
								"ç”Ÿãã¦ã„ã‚‹æ„å‘³",
								"ã™ã‚Œé•ã„ã®",
								"ã‹ãé›†ã‚ãŸ",
								"ã¨ã‚ã‘ã‚‹ã‚ˆã†ãª",
								"ã“ã‚Œã£ã¦",
								"ç”Ÿã¾ã‚Œå¤‰ã‚ã£ãŸã‚‰",
								"ã“ã®ä¸–ç•Œã®",
								"ä¸­äºŒã¨è¨€ã‚ã‚Œã¦ã‚‚",
								"ç‡ƒãˆã¤ãã™ã»ã©",
								"ã“ã®ä¸–ã«ãµãŸã¤ã¨ãªã„",
								"æ¯”ã¹ã‚ˆã†ãŒãªãã¦ã‚‚",
								"ã—ã‚…ãã´ã¨",
								"å…ˆç¥–ä»£ã€…ä¸€æ—æœ«è£”ã¾ã§",
								"ä¸–ç•Œã˜ã‚…ã†ã‚’æ•µã«å›ã—ã¦ã‚‚",
								"ä¸–ç•ŒãŒçµ‚ã‚ã£ãŸã¨ã—ã¦ã‚‚",
								"èª°ã‹ã‚‰ã‚‚å¿…è¦ã¨ã•ã‚Œã¦ã„ãªã„",
								"é€šçŸ¥ãŒé³´ã‚‹ãŸã³ã«",
								"ãƒãƒƒãƒˆã®ä¸­ã ã‘ã§",
								"å£Šã‚Œã‚‹ãã‚‰ã„"
						],
            core: [
								"å…±ä¾å­˜",
								"è„³å†…éº»è–¬",
								"ä¸€ç”Ÿã®ç½ª",
								"æœ‰å®³ãªæ„›",
								"ã‚ãªãŸã®ç”Ÿå‘½ï¼ˆã„ã®ã¡ï¼‰",
								"é­”æ³•",
								"å‘ªã„",
								"å„ä»‹",
								"èª¬æ•™",
								"åˆæœŸå‹ã®ã‚¢ãƒƒãƒ—ãƒ«ã‚¦ã‚©ãƒƒãƒ",
								"ã‚»ã‚¯ãƒãƒ©",
								"ã‚¿ãƒ³ãƒ‘ã‚¯è³ª",
								"åŸæ¶²ã®ã‚«ãƒ«ãƒ”ã‚¹",
								"å±¥ãç¶šã‘ãŸãã¤ä¸‹",
								"ãªã¾ç‰¡è £",
								"ã¨ã‚“ã‹ã¤ã®è„‚èº«",
								"å¾Œæ‚”ã®ã‚¿ãƒˆã‚¥ãƒ¼",
								"æ´—ã£ã¦ãªã„ãƒ”ã‚¢ã‚¹",
								"æ–­ç½ª",
								"æ¯’è¦ª",
								"å‚·ã‚“ã é«ª",
								"æ²»ã‚‰ãªã„ãŠã­ã—ã‚‡",
								"éš ã—ã¦ã„ãŸBLæœ¬",
								"é¢¨ä¿—ã¨é–“é•ã‚ã‚Œã‚‹",
								"ã“ã®é•·ã„ãƒã‚¤ãƒ«ã®ã²ã¿ã¤",
								"ã½ã£ã‹ã‚Šã¨ç©ºã„ãŸç©´",
								"ADHDã®æ¨©åŒ–",
								"èª°ã‚‚ãŒæŒ¯ã‚Šå‘ããƒ–ã‚¹",
								"ã‹ã‚ã„ã„å¥³",
								"æ­¢ã¾ã‚‰ãªã„æ•´å½¢",
								"æ¬²æœ›ã®ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ",
								"ãªã‘ãªã—ã®åƒå††æœ­",
								"æ‰‹ã«å…¥ã‚ŒãŸãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆéšœç¢è€…æ‰‹å¸³ï¼‰",
								"ä»Šæ›´è¦šãˆãŸä¸‰è§’é–¢æ•°",
								"èºé¬±ã¨ä¸çœ ç—‡",
								"è¶³ã‚Šãªã„é ­",
								"è™å¾…",
								"æš—é»’",
								"æœªæ‰•ã„ã®çµ¦æ–™",
								"é€ƒã‚Œã‚‰ã‚Œã¬å®¿å‘½ï¼ˆã•ã ã‚ï¼‰",
								"å†·ã‚ãŸã‹ã‚‰ã‚ã’ãã‚“",
								"é£²ã¿ãŸããªã„ãƒ†ã‚­ãƒ¼ãƒ©",
								"æº¶ã‘ãŸæ™‚é–“",
								"æ¯å¤œä¸€äººã§ãŸã¹ãŸè“å­ãƒ‘ãƒ³",
								"æº¶ã‘ãªã„ç‰‡æ —ç²‰",
								"ã“ã¼ã‚ŒãŸã‚¤ã‚¯ãƒ©",
								"æ¬²æœ›",
								"ç”Ÿã¾ã‚Œã¤ãã®è²§ä¹",
								"ã„ã¤ã‚‚é‡‘æ¬ ",
								"ç–‘ã‚ã‚Œã‚‹äººé–“æ€§",
								"ç”˜ã„ç½ ",
								"17æ­³ã®æ™‚ã®ç§",
								"ãƒ„ã‚¤å»ƒ",
								"ç†æƒ³ã¨ç¾å®Ÿ",
								"ã‚¯ãƒ¬ã‚«ã®è«‹æ±‚æ›¸",
								"è²¡å¸ƒã®ä¸­ã®ãƒ¬ã‚·ãƒ¼ãƒˆã®æŸ",
								"ãƒãƒ¨ãƒãƒ¼ã‚ºå‘³",
								"å™›ã¿çµ‚ãˆãŸã‚¬ãƒ ",
								"ä»Šæ—¥ã‚‚ã‚¦ãƒ¼ãƒãƒ¼",
								"ä½¿ã„å¤ã—ãŸã‚¨ã‚¯ã‚¹ãƒ†",
								"å¸Œæ­»å¿µæ…®",
								"é£²ã¿è¾¼ã‚“ã ãƒ”ã‚¢ã‚¹ã®ã‚­ãƒ£ãƒƒãƒ",
								"è³å‘³æœŸé™åˆ‡ã‚Œã®ã‚³ãƒ³ãƒ“ãƒ‹å¼å½“",
								"è‡ªå‚·è‡ªè™",
								"15æ™‚é–“ã®ç¡çœ ",
								"ç‹¬å æ¬²",
								"ä¸€ç·’ã«è¡Œãäººã¯ã‚‚ã†ã„ãªã„å¹´ãƒ‘ã‚¹"
						],
            outro: [
									"â€¦â€¦ã‚ã’ã‚‹",
									"ã€æ•™ãˆã¦ï¼Ÿ",
									"ã ã‘ã§æº€ãŸã—ã¦",
									"ã®å…±çŠ¯è€…ã«ãªã‚ã†",
									"ä»¥å¤–ã€è¦ã‚‰ãªã„",
									"ã€ã•ã›ã¦ã‚ˆ",
									"ã‚’ã€ã‚ã’ã‚‹ã­â™¡",
									"ã€ã‚‚ã†ã—ã«ãŸã„",
									"ã€å¸°ã‚Œãªã„",
									"æ‹ã—ã¦ã‚‹",
									"ãã‚“ãªæ°—åˆ†",
									"å…±å­˜ã™ã‚‹ã—ã‹ãªã„",
									"ã€ãŸã¶ã‚“ã€æ­»ã¬ã¾ã§",
									"ã€€å¤¢ã«è¦‹ãã†",
									"ã€æ­»å¾Œã®ä¸–ç•Œï¼Ÿ",
									"ã€€ã„ã„åŠ æ¸›ã«ã—ã¦",
									"ã€€ã‚‚ã†ã€çµ‚ã‚ã‚Šã­",
									"ä½•ã‚‚èã“ãˆãªã„",
									"å¾…ã£ã¦ã¦...",
									"ãã®è‹¦ã—ã¿ã ã‘",
									"ã‚’å¦å®šã¯ã—ãªã„",
									"ãŸã ã€ãã‚Œã ã‘",
									"ã€€ãã†ã€ã ã‹ã‚‰é»™ã£ã¦ã¦",
									"ã€ãã‚ŒãŒã‚ãŸã—ã®ç­”ãˆ",
									"ã‚‚ã†ä¸€åº¦è¨€ã£ã¦",
									"ãŠäº’ã„ã•ã¾",
									"ãšã£ã¨ç¬‘é¡”ã§ã„ã‚‰ã‚Œã‚‹",
									"ã€€ã†ã‚“ã€ã„ã„ã‚ˆâ€¦",
									"ã€€æœã¾ã§èª¿æ•™ã™ã‚‹ï¼Ÿ",
									"ã‚ã¨ã§æ³•å»·ã§ä¼šã„ã¾ã—ã‚‡ã†",
									"ã€æ­»ã¬ã¾ã§ãã‚Œ",
									"ã„ã¤ã‚‚ãƒ”ãƒ³ã‚¯è‰²",
									"ç›®ã®å‰ã®çµ¶æœ›",
									"ã ã‹ã‚‰ã€ã—ã‚“ã§ã»ã—ã„",
									"ã®ã¾ã¾ã§ã„ã•ã›ã¦",
									"ã€€è¦‹ãŸã„ã®ï¼Ÿ",
									"ã‹ã‚‰é€ƒã’ãªã„ã§ï¼",
									"ã‹ã‚“ã¹ã‚“ã—ã¦ã­",
									"å‹é”ãªã‚“ã¦ã„ã‚‰ãªã„",
									"ã€€ãã‚ŒãŒç ´æ»…",
									"ã€€ãœã‚“ã¶å˜˜",
									"ã€€æ¥ä¸–ã§å‡ºç›´ã—ã¦ãã¦",
									"çµ‚ã‚ã‚‰ãªã„è‹¦ã—ã¿",
									"ã€æœ¬æ°—ã®ãŠã­ãŒã„",
									"ã€ã»ã‚“ã¨ã«æ°—æŒã¡æ‚ªã„",
									"ã€€ã¾ã ã¾ã ã“ã‚Œã‹ã‚‰",
									"ã€æ±šã‚‰ã‚ã—ã„",
									"ã§ã—ã‚‡ï¼Ÿ"
						],
            symbols: ["â™¡", "âœï¸", "â„ï¸", "ğŸ€", "ğŸ­", "ğŸ’‰","ğŸ”ª", "ğŸ¤",""]
        };

        // ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        const imageInput = document.getElementById('imageInput');
        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const img = document.getElementById('uploaded-img');
                    img.src = event.target.result;
                    img.style.display = 'block';
                    document.getElementById('placeholder-text').style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        });

        // ãƒ•ãƒ¬ãƒ¼ã‚ºç”Ÿæˆ
				function generatePoem() {
            const i = dictionary.intro[Math.floor(Math.random() * dictionary.intro.length)];
            const c = dictionary.core[Math.floor(Math.random() * dictionary.core.length)];
            const o = dictionary.outro[Math.floor(Math.random() * dictionary.outro.length)];
            const s = dictionary.symbols[Math.floor(Math.random() * dictionary.symbols.length)]; 

            const display = document.getElementById('phrase-display');
            display.innerHTML = `${i}<br>${c}${o}${s}`;

            const colors = [
							'#ffffff', // ç™½ï¼ˆæœ€å¼·ã«èª­ã¿ã‚„ã™ã„ï¼‰
							'#ff88dd', // ç´«
			        '#cccccc', // æ˜ã‚‹ã„ã‚°ãƒ¬ãƒ¼ï¼ˆãƒ¢ãƒãƒˆãƒ¼ãƒ³ï¼‰
					    '#00ffff', // æ°´è‰²ï¼ˆè›å…‰ã£ã½ã„ï¼‰
					    '#ffff00', // é»„è‰²ï¼ˆç›®ç«‹ã¤ï¼‰
					    '#7fff00', // è›å…‰ç·‘
					    '#ff99cc', // ãƒ‘ã‚¹ãƒ†ãƒ«ãƒ”ãƒ³ã‚¯ï¼ˆæ¿ƒã„ãƒ”ãƒ³ã‚¯ã‚ˆã‚Šèª­ã¿ã‚„ã™ã„ï¼‰
					    '#ffdb00'  // ã‚ªãƒ¬ãƒ³ã‚¸ãŒã‹ã£ãŸé»„è‰²
						];
            const selectedColor = colors[Math.floor(Math.random() * colors.length)];
            display.style.color = selectedColor;

            const outlineColor = (selectedColor === '#ffffff') ? '#ff007f' : '#000000';
            display.style.textShadow = `1px 1px 0 ${outlineColor}, -1px -1px 0 ${outlineColor}, 1px -1px 0 ${outlineColor}, -1px 1px 0 ${outlineColor}`;

            const randomRotate = Math.floor(Math.random() * 4) - 2; // ä¸‹åœ°ãŒåºƒã„ã®ã§å‚¾ãã¯æ§ãˆã‚ã«
            display.style.transform = `translateX(-50%) rotate(${randomRotate}deg)`;
        }

        // ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        function downloadCheki() {
            const chekiArea = document.getElementById('cheki-area');
            
            // html2canvasã‚’å®Ÿè¡Œ
            html2canvas(chekiArea, {
                scale: 2, // é«˜ç”»è³ªã§ä¿å­˜
                useCORS: true // å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ï¼ˆãƒ•ã‚©ãƒ³ãƒˆç­‰ï¼‰ã®è¨±å¯
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'deco-cheki.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }

        generatePoem();
    </script>
</body>
</html>